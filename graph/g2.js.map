{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7151c9085317a83d6a6e","webpack:///external \"vue\"","webpack:///external \"@antv/g2\"","webpack:///./src/graph/g2.js"],"names":["cfg","width","type","Number","default","height","padding","background","Object","plotBackground","forceFit","Boolean","animate","pixelRatio","data","ChartVue","Vue","component","props","configs","onDraw","Function","graph","render","graphData","h","ref","watch","keys","concat","reduce","pv","cv","handler","clearTimeout","createGraphTid","setTimeout","createGraph","deep","methods","getGraphConfigs","container","$refs","core","destroy","bindEvents","listeners","$listeners","forEach","evtType","on","off","args","apply","method","console","error","fn","warn","result","mounted","destroyed"],"mappings":"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","file":"g2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"g2\"] = factory();\n\telse\n\t\troot[\"g2\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7151c9085317a83d6a6e","module.exports = require(\"vue\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue\"\n// module id = 0\n// module chunks = 0 1 2 3","module.exports = require(\"@antv/g2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@antv/g2\"\n// module id = 2\n// module chunks = 2","/**\r\n * G2封装，与vue绑定\r\n */\r\nimport Vue from 'vue';\r\nimport {\r\n  Chart\r\n} from '@antv/g2';\r\n\r\n// 图表默认配置项\r\nconst cfg = {\r\n  width: {\r\n    type: Number,\r\n    default: 500\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 500\r\n  },\r\n  padding: {\r\n    default: 'auto'\r\n  },\r\n  background: {\r\n    type: Object\r\n  },\r\n  plotBackground: {\r\n    type: Object\r\n  },\r\n  forceFit: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  animate: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  pixelRatio: {\r\n    type: Number\r\n  },\r\n  data: {\r\n    default() {\r\n      return [];\r\n    }\r\n  }\r\n};\r\n\r\nconst ChartVue = Vue.component('g2-chart', {\r\n  props: {\r\n    configs: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    ...cfg,\r\n    onDraw: {\r\n      type: Function,\r\n      default(graph) {\r\n        graph.render(); // 默认图表渲染\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      graphData: null // 保存最近一次graph数据，在下次rerender时可以取用\r\n    };\r\n  },\r\n  // template: '<div><div ref=\"container\"></div>{{ padding.top }}</div>',\r\n  render(h) {\r\n    return h('div', {\r\n      ref: 'container'\r\n    });\r\n  },\r\n  watch: {\r\n    ...Object.keys(cfg).concat('configs').reduce((pv, cv) => {\r\n      if (cv !== 'data') { // 排除data\r\n        return {\r\n          ...pv,\r\n          [cv]: {\r\n            handler() {\r\n              // 防止同时改变多个attr引发多次create行为\r\n              clearTimeout(this.createGraphTid);\r\n              this.createGraphTid = setTimeout(() => {\r\n                this.createGraph();\r\n              }, 0);\r\n            },\r\n            deep: true // 深度watch\r\n          }\r\n        };\r\n      } else {\r\n        return pv;\r\n      }\r\n    }, {})\r\n  },\r\n  methods: {\r\n    getGraphConfigs() {\r\n      // 获取merged图表配置项\r\n      let configs = Object.keys(cfg).reduce((pv, cv) => {\r\n        if (typeof this[cv] !== 'undefined') {\r\n          return {\r\n            ...pv,\r\n            [cv]: this[cv]\r\n          };\r\n        } else {\r\n          return pv;\r\n        }\r\n      }, {});\r\n      // this.configs优先级更高\r\n      configs = {\r\n        ...configs,\r\n        ...this.configs\r\n      };\r\n      if (this.graphData) {\r\n        configs.data = this.graphData;\r\n      }\r\n      return configs;\r\n    },\r\n    /**\r\n     * 创建graph\r\n     */\r\n    createGraph() {\r\n      const container = this.$refs.container;\r\n      if (this.core) { // 先销毁原来的graph\r\n        this.core.destroy();\r\n      }\r\n      const configs = this.getGraphConfigs();\r\n      // 保存引用\r\n      this.core = new Chart({\r\n        container,\r\n        ...configs\r\n      });\r\n      // 绑定事件\r\n      this.bindEvents();\r\n      // 执行绘制\r\n      this.onDraw(this.core);\r\n    },\r\n    /**\r\n     * 绑定事件\r\n     */\r\n    bindEvents() {\r\n      const listeners = this.$listeners;\r\n      const core = this.core;\r\n      Object.keys(listeners).forEach((evtType) => {\r\n        core.on(evtType, listeners[evtType]); // 图表事件注册\r\n      });\r\n    },\r\n    /**\r\n     * 代理graph off方法\r\n     */\r\n    off(...args) {\r\n      const core = this.core;\r\n      core.off.apply(core, args);\r\n    },\r\n    /**\r\n     * 封装g2方法\r\n     */\r\n    graph(method, ...args) {\r\n      const core = this.core;\r\n      if (!core) {\r\n        console.error('Graph not render');\r\n      } else {\r\n        const fn = core[method];\r\n        if (!fn) {\r\n          console.warn('There is no ' + method + ' on graph');\r\n        } else {\r\n          const result = fn.apply(core, args);\r\n          if (method === 'source' || method === 'changeData') { // 保留最近一次data引用\r\n            this.graphData = args[0];\r\n            if (method === 'source') {\r\n              // 执行绘制\r\n              this.onDraw(this.core);\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.createGraph();\r\n  },\r\n  destroyed() {\r\n    // 销毁事宜\r\n    clearTimeout(this.createGraphTid);\r\n    this.createGraphTid = null;\r\n    if (this.core) {\r\n      this.core.off();\r\n      this.core.destroy();\r\n      this.core = null;\r\n    }\r\n  }\r\n});\r\n\r\nexport default ChartVue;\r\n\r\nexport * from '@antv/g2';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/graph/g2.js"],"sourceRoot":""}