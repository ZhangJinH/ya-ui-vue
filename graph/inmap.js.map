{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7151c9085317a83d6a6e","webpack:///external \"vue\"","webpack:///external \"inmap\"","webpack:///./src/graph/inmap.js","webpack:///external \"lodash\""],"names":["counts","Inmap","Vue","component","props","mapConfigs","type","Object","default","overlayConfigs","overlayType","onDraw","Function","map","overlay","add","data","render","h","ref","attrs","id","watch","reduce","pv","cv","handler","clearTimeout","createGraphTid","setTimeout","createGraph","deep","methods","containerId","$refs","container","core","destroy","inmap","Map","upperFirst","bindEvents","listeners","$listeners","keys","forEach","evtType","on","off","args","apply","method","console","error","fn","warn","result","mounted","destroyed"],"mappings":"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","file":"inmap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"inmap\"] = factory();\n\telse\n\t\troot[\"inmap\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7151c9085317a83d6a6e","module.exports = require(\"vue\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue\"\n// module id = 0\n// module chunks = 0 1 2 3","module.exports = require(\"inmap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"inmap\"\n// module id = 4\n// module chunks = 0","/**\r\n * inmap封装，与vue绑定\r\n */\r\nimport Vue from 'vue';\r\nimport inmap from 'inmap';\r\nimport {\r\n  upperFirst\r\n} from 'lodash';\r\n\r\nvar counts = 0; // 计数\r\nconst Inmap = Vue.component('inmap', {\r\n  props: {\r\n    mapConfigs: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    overlayConfigs: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    overlayType: 'dot',\r\n    onDraw: {\r\n      type: Function,\r\n      default: function (map, overlay) {\r\n        map.add(overlay); // 添加图层\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n    };\r\n  },\r\n  // template: '<div><div ref=\"container\"></div>{{ padding.top }}</div>',\r\n  render(h) {\r\n    return h('div', {\r\n      ref: 'container',\r\n      attrs: {\r\n        id: 'inmap-' + (counts++)\r\n      }\r\n    });\r\n  },\r\n  watch: {\r\n    ...['mapConfigs', 'overlayConfigs'].reduce((pv, cv) => {\r\n      return {\r\n        ...pv,\r\n        [cv]: {\r\n          handler() {\r\n            // 防止同时改变多个attr引发多次create行为\r\n            clearTimeout(this.createGraphTid);\r\n            this.createGraphTid = setTimeout(() => {\r\n              this.createGraph();\r\n            }, 0);\r\n          },\r\n          deep: true // 深度watch\r\n        }\r\n      };\r\n    }, {})\r\n  },\r\n  methods: {\r\n    /**\r\n     * 创建inmap和overlay\r\n     */\r\n    createGraph() {\r\n      const containerId = this.$refs.container.id;\r\n      if (this.core) { // 先销毁原来的graph\r\n        this.core.destroy();\r\n      }\r\n      const mapConfigs = this.mapConfigs;\r\n      // 保存引用\r\n      this.map = new inmap.Map({\r\n        id: containerId,\r\n        ...mapConfigs\r\n      });\r\n      const overlayType = this.overlayType;\r\n      const overlayConfigs = this.overlayConfigs;\r\n      this.overlay = new inmap[upperFirst(overlayType) + 'Overlay']({\r\n        ...overlayConfigs\r\n      });\r\n      // 绑定事件\r\n      this.bindEvents();\r\n\r\n      //调用onDraw\r\n      this.onDraw(this.map, this.overlay);\r\n    },\r\n    /**\r\n     * 绑定事件\r\n     */\r\n    bindEvents() {\r\n      const listeners = this.$listeners;\r\n      const map = this.map;\r\n      Object.keys(listeners).forEach((evtType) => {\r\n        map.on(evtType, listeners[evtType]); // 图表事件注册\r\n      });\r\n    },\r\n    /**\r\n     * 代理graph off方法\r\n     */\r\n    off(...args) {\r\n      const map = this.map;\r\n      map.off.apply(map, args);\r\n    },\r\n    /**\r\n     * 封装map和overlay方法\r\n     */\r\n    map(method, ...args) {\r\n      const map = this.map;\r\n      if (!map) {\r\n        console.error('map not render');\r\n      } else {\r\n        const fn = map[method];\r\n        if (!fn) {\r\n          console.warn('There is no ' + method + ' on map');\r\n        } else {\r\n          const result = fn.apply(map, args);\r\n          return result;\r\n        }\r\n      }\r\n    },\r\n    overlay(method, ...args) {\r\n      const overlay = this.overlay;\r\n      if (!overlay) {\r\n        console.error('overlay not render');\r\n      } else {\r\n        const fn = overlay[method];\r\n        if (!fn) {\r\n          console.warn('There is no ' + method + ' on map');\r\n        } else {\r\n          const result = fn.apply(overlay, args);\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.createGraph();\r\n  },\r\n  destroyed() {\r\n    // 销毁事宜\r\n    clearTimeout(this.createGraphTid);\r\n    this.createGraphTid = null;\r\n    if (this.map) {\r\n      this.map.off();\r\n      this.map = null;\r\n    }\r\n    if (this.overlay) {\r\n      this.overlay.off();\r\n      this.overlay = null;\r\n    }\r\n  }\r\n});\r\n\r\nexport default Inmap;\r\n\r\nexport * from 'inmap';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/graph/inmap.js","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 11\n// module chunks = 0"],"sourceRoot":""}