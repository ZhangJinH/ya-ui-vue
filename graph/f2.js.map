{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4cf6cf573e4461063700","webpack:///external \"vue\"","webpack:///external \"@antv/f2\"","webpack:///./src/graph/f2.js"],"names":["cfg","el","type","Object","width","Number","default","height","padding","Array","pixelRatio","ChartVue","Vue","component","props","configs","onDraw","Function","graph","render","data","graphData","h","ref","watch","keys","concat","reduce","pv","cv","handler","clearTimeout","createGraphTid","setTimeout","createGraph","deep","methods","getGraphConfigs","container","$refs","core","destroy","bindEvents","source","listeners","$listeners","forEach","evtType","on","off","args","apply","method","console","error","fn","warn","result","mounted","destroyed"],"mappings":"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","file":"f2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"f2\"] = factory();\n\telse\n\t\troot[\"f2\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4cf6cf573e4461063700","module.exports = require(\"vue\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue\"\n// module id = 0\n// module chunks = 0 1 2","module.exports = require(\"@antv/f2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@antv/f2\"\n// module id = 1\n// module chunks = 2","/**\r\n * F2封装，与vue绑定\r\n */\r\nimport Vue from 'vue';\r\nimport {\r\n  Chart\r\n} from '@antv/f2';\r\n\r\n// 图表默认配置项\r\nconst cfg = {\r\n  el: {\r\n    type: Object\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 500\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 500\r\n  },\r\n  padding: {\r\n    type: [Number, Array]\r\n  },\r\n  pixelRatio: {\r\n    type: Number\r\n  }\r\n};\r\n\r\nconst ChartVue = Vue.component('f2-chart', {\r\n  props: {\r\n    configs: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    ...cfg,\r\n    onDraw: {\r\n      type: Function,\r\n      default: function (graph) {\r\n        graph.render(); // 默认图表渲染\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      graphData: null // 保存最近一次graph数据，在下次rerender时可以取用\r\n    };\r\n  },\r\n  // template: '<div><div ref=\"container\"></div>{{ padding.top }}</div>',\r\n  render(h) {\r\n    return h('canvas', {\r\n      ref: 'container'\r\n    });\r\n  },\r\n  watch: {\r\n    ...Object.keys(cfg).concat('configs').reduce((pv, cv) => {\r\n      if (cv !== 'data') { // 排除data\r\n        return {\r\n          ...pv,\r\n          [cv]: {\r\n            handler() {\r\n              // 防止同时改变多个attr引发多次create行为\r\n              clearTimeout(this.createGraphTid);\r\n              this.createGraphTid = setTimeout(() => {\r\n                this.createGraph();\r\n              }, 0);\r\n            },\r\n            deep: true // 深度watch\r\n          }\r\n        };\r\n      } else {\r\n        return pv;\r\n      }\r\n    }, {})\r\n  },\r\n  methods: {\r\n    getGraphConfigs() {\r\n      // 获取merged图表配置项\r\n      let configs = Object.keys(cfg).reduce((pv, cv) => {\r\n        if (typeof this[cv] !== 'undefined') {\r\n          return {\r\n            ...pv,\r\n            [cv]: this[cv]\r\n          };\r\n        } else {\r\n          return pv;\r\n        }\r\n      }, {});\r\n      // this.configs优先级更高\r\n      configs = {\r\n        ...configs,\r\n        ...this.configs\r\n      };\r\n      return configs;\r\n    },\r\n    /**\r\n     * 创建graph\r\n     */\r\n    createGraph() {\r\n      const container = this.$refs.container;\r\n      if (this.core) { // 先销毁原来的graph\r\n        this.core.destroy();\r\n      }\r\n      const configs = this.getGraphConfigs();\r\n      // 保存引用\r\n      this.core = new Chart({\r\n        el: container,\r\n        ...configs\r\n      });\r\n      // 绑定事件\r\n      this.bindEvents();\r\n      if (this.graphData) {\r\n        this.core.source(this.graphData);\r\n        // 执行绘制 \r\n        // Important: 无数据绘制会报错\r\n        this.onDraw(this.core);\r\n      }\r\n    },\r\n    /**\r\n     * 绑定事件\r\n     */\r\n    bindEvents() {\r\n      const listeners = this.$listeners;\r\n      const core = this.core;\r\n      Object.keys(listeners).forEach((evtType) => {\r\n        core.on(evtType, listeners[evtType]); // 图表事件注册\r\n      });\r\n    },\r\n    /**\r\n     * 代理graph off方法\r\n     */\r\n    off(...args) {\r\n      const core = this.core;\r\n      core.off.apply(core, args);\r\n    },\r\n    /**\r\n     * 封装g2方法\r\n     */\r\n    graph(method, ...args) {\r\n      const core = this.core;\r\n      if (!core) {\r\n        console.error('Graph not render');\r\n      } else {\r\n        const fn = core[method];\r\n        if (!fn) {\r\n          console.warn('There is no ' + method + ' on graph');\r\n        } else {\r\n          const result = fn.apply(core, args);\r\n          if (method === 'source' || method === 'changeData') { // 保留最近一次data引用\r\n            this.graphData = args[0];\r\n            if (method === 'source') {\r\n              // 执行绘制\r\n              this.onDraw(this.core);\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.createGraph();\r\n  },\r\n  destroyed() {\r\n    // 销毁事宜\r\n    clearTimeout(this.createGraphTid);\r\n    this.createGraphTid = null;\r\n    if (this.core) {\r\n      this.core.off();\r\n      this.core.destroy();\r\n      this.core = null;\r\n    }\r\n  }\r\n});\r\n\r\nexport default ChartVue;\r\n\r\nexport * from '@antv/f2';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/graph/f2.js"],"sourceRoot":""}